!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("PropTypes")):"function"==typeof define&&define.amd?define(["React","PropTypes"],t):"object"==typeof exports?exports.DroppedFileWidget=t(require("React"),require("PropTypes")):e.DroppedFileWidget=t(e.React,e.PropTypes)}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",i=o.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?i===t.replace(/\/.*$/,""):o===t}))}return!0}}])},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i);function u(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,u)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var f=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function s(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=f.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var p=[".DS_Store","Thumbs.db"];function d(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?v(e.dataTransfer,e.type):g(e))];var n}))}))}function g(e){return(null!==e.target&&e.target.files?b(e.target.files):[]).map((function(e){return s(e)}))}function v(e,t){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return e.items?(n=b(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(m))]):[3,2];case 1:return[2,y(h(r.sent()))];case 2:return[2,y(b(e.files).map((function(e){return s(e)})))]}}))}))}function y(e){return e.filter((function(e){return-1===p.indexOf(e.name)}))}function b(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function m(e){if("function"!=typeof e.webkitGetAsEntry)return D(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?w(t):D(e)}function h(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(e,Array.isArray(t)?h(t):[t])}),[])}function D(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=s(t);return Promise.resolve(n)}function O(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){return[2,e.isDirectory?w(e):j(e)]}))}))}function w(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function o(){var i=this;t.readEntries((function(t){return u(i,void 0,void 0,(function(){var i,a,u;return c(this,(function(c){switch(c.label){case 0:if(t.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return i=c.sent(),e(i),[3,4];case 3:return a=c.sent(),n(a),[3,4];case 4:return[3,6];case 5:u=Promise.all(t.map(O)),r.push(u),o(),c.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function j(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=s(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var E=n(2),P=n.n(E);function F(e,t){return"application/x-moz-file"===e.type||P()(e,t)}function x(e,t,n){if(k(e.size)){if(k(t)&&k(n))return e.size>=t&&e.size<=n;if(k(t))return e.size>=t;if(k(n))return e.size<=n}return!0}function k(e){return null!=e}function A(e,t,n,r){return e.every((function(e){return F(e,t)&&x(e,n,r)}))}function S(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function C(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function R(e){e.preventDefault()}function L(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function T(e){return-1!==e.indexOf("Edge/")}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return L(e)||T(e)}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.some((function(t){return!S(e)&&t&&t.apply(void 0,[e].concat(r)),S(e)}))}}function z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var U=Object(r.forwardRef)((function(e,t){var n=e.children,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accept,n=e.disabled,o=void 0!==n&&n,i=e.getFilesFromEvent,a=void 0===i?d:i,u=e.maxSize,c=void 0===u?1/0:u,l=e.minSize,f=void 0===l?0:l,s=e.multiple,p=void 0===s||s,g=e.onDragEnter,v=e.onDragLeave,y=e.onDragOver,b=e.onDrop,m=e.onDropAccepted,h=e.onDropRejected,D=e.onFileDialogCancel,O=e.preventDropOnDocument,w=void 0===O||O,j=e.noClick,E=void 0!==j&&j,P=e.noKeyboard,k=void 0!==P&&P,L=e.noDrag,T=void 0!==L&&L,W=e.noDragEventsBubbling,U=void 0!==W&&W,N=Object(r.useRef)(null),H=Object(r.useRef)(null),Y=Object(r.useReducer)(G,V),$=M(Y,2),J=$[0],Q=$[1],X=J.isFocused,Z=J.isFileDialogActive,ee=J.draggedFiles,te=Object(r.useCallback)((function(){H.current&&(Q({type:"openDialog"}),H.current.value=null,H.current.click())}),[Q]),ne=function(){Z&&setTimeout((function(){H.current&&(H.current.files.length||(Q({type:"closeDialog"}),"function"==typeof D&&D()))}),300)};Object(r.useEffect)((function(){return window.addEventListener("focus",ne,!1),function(){window.removeEventListener("focus",ne,!1)}}),[H,Z,D]);var re=Object(r.useCallback)((function(e){N.current&&N.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),te()))}),[N,H]),oe=Object(r.useCallback)((function(){Q({type:"focus"})}),[]),ie=Object(r.useCallback)((function(){Q({type:"blur"})}),[]),ae=Object(r.useCallback)((function(){E||(_()?setTimeout(te,0):te())}),[H,E]),ue=Object(r.useRef)([]),ce=function(e){N.current&&N.current.contains(e.target)||(e.preventDefault(),ue.current=[])};Object(r.useEffect)((function(){return w&&(document.addEventListener("dragover",R,!1),document.addEventListener("drop",ce,!1)),function(){w&&(document.removeEventListener("dragover",R),document.removeEventListener("drop",ce))}}),[N,w]);var le=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),ye(e),-1===ue.current.indexOf(e.target)&&(ue.current=[].concat(z(ue.current),[e.target])),C(e)&&Promise.resolve(a(e)).then((function(t){S(e)&&!U||(Q({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),g&&g(e))}))}),[a,g,U]),fe=Object(r.useCallback)((function(e){if(e.preventDefault(),e.persist(),ye(e),e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return C(e)&&y&&y(e),!1}),[y,U]),se=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),ye(e);var t=ue.current.filter((function(t){return t!==e.target&&N.current&&N.current.contains(t)}));ue.current=t,t.length>0||(Q({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),C(e)&&v&&v(e))}),[N,v,U]),pe=Object(r.useCallback)((function(e){e.preventDefault(),e.persist(),ye(e),ue.current=[],Q({type:"reset"}),C(e)&&Promise.resolve(a(e)).then((function(n){if(!S(e)||U){var r=[],o=[];n.forEach((function(e){F(e,t)&&x(e,f,c)?r.push(e):o.push(e)})),!p&&r.length>1&&o.push.apply(o,z(r.splice(0))),Q({acceptedFiles:r,rejectedFiles:o,type:"setFiles"}),b&&b(r,o,e),o.length>0&&h&&h(o,e),r.length>0&&m&&m(r,e)}}))}),[p,t,f,c,a,b,m,h,U]),de=function(e){return o?null:e},ge=function(e){return k?null:de(e)},ve=function(e){return T?null:de(e)},ye=function(e){U&&e.stopPropagation()},be=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onKeyDown,i=e.onFocus,a=e.onBlur,u=e.onClick,c=e.onDragEnter,l=e.onDragOver,f=e.onDragLeave,s=e.onDrop,p=q(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return K(B({onKeyDown:ge(I(r,re)),onFocus:ge(I(i,oe)),onBlur:ge(I(a,ie)),onClick:de(I(u,ae)),onDragEnter:ve(I(c,le)),onDragOver:ve(I(l,fe)),onDragLeave:ve(I(f,se)),onDrop:ve(I(s,pe))},n,N),o||k?{}:{tabIndex:0},{},p)}}),[N,re,oe,ie,ae,le,fe,se,pe,k,T,o]),me=Object(r.useCallback)((function(e){e.stopPropagation()}),[]),he=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,r=void 0===n?"ref":n,o=e.onChange,i=e.onClick,a=q(e,["refKey","onChange","onClick"]),u=B({accept:t,multiple:p,type:"file",style:{display:"none"},onChange:de(I(o,pe)),onClick:de(I(i,me)),autoComplete:"off",tabIndex:-1},r,H);return K({},u,{},a)}}),[H,t,p,pe,o]),De=ee.length,Oe=p||De<=1,we=De>0&&A(ee,t,f,c),je=De>0&&(!we||!Oe);return K({},J,{isDragAccept:we,isDragReject:je,isFocused:X&&!o,getRootProps:be,getInputProps:he,rootRef:N,inputRef:H,open:de(te)})}(q(e,["children"])),a=i.open,u=q(i,["open"]);return Object(r.useImperativeHandle)(t,(function(){return{open:a}}),[a]),o.a.createElement(r.Fragment,null,n(K({},u,{open:a})))}));U.displayName="Dropzone",U.propTypes={children:a.a.func,accept:a.a.oneOfType([a.a.string,a.a.arrayOf(a.a.string)]),multiple:a.a.bool,preventDropOnDocument:a.a.bool,noClick:a.a.bool,noKeyboard:a.a.bool,noDrag:a.a.bool,noDragEventsBubbling:a.a.bool,minSize:a.a.number,maxSize:a.a.number,disabled:a.a.bool,getFilesFromEvent:a.a.func,onFileDialogCancel:a.a.func,onDragEnter:a.a.func,onDragLeave:a.a.func,onDragOver:a.a.func,onDrop:a.a.func,onDropAccepted:a.a.func,onDropRejected:a.a.func};var N=U,V={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],rejectedFiles:[]};function G(e,t){switch(t.type){case"focus":return K({},e,{isFocused:!0});case"blur":return K({},e,{isFocused:!1});case"openDialog":return K({},e,{isFileDialogActive:!0});case"closeDialog":return K({},e,{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive;return K({},e,{draggedFiles:t.draggedFiles,isDragActive:n});case"setFiles":return K({},e,{acceptedFiles:t.acceptedFiles,rejectedFiles:t.rejectedFiles});case"reset":return K({},e,{isFileDialogActive:!1,isDragActive:!1,draggedFiles:[]});default:return e}}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}function Q(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return ne}));var te=function(e){function t(){return Y(this,t),Q(this,X(t).apply(this,arguments))}return Z(t,e),J(t,[{key:"render",value:function(){var e=this.props.preview,t=e?"PREVIEW":this.props.dragging?"ACTIVE":"READY";return o.a.createElement("div",{style:this.props.style},"PREVIEW"===t&&o.a.createElement("img",{src:e,style:{maxWidth:"98%",maxHeight:"98%",width:"auto",height:"auto"},alt:""}),"ACTIVE"===t&&(this.props.dragLabel||"Release to drop"),"READY"===t&&(this.props.readyLabel||"Drag file here"))}}]),t}(o.a.Component),ne=function(e){function t(e){var n;return Y(this,t),(n=Q(this,X(t).call(this,e))).state={file:null,preview:null,dragging:!1},n}return Z(t,e),J(t,[{key:"componentWillUnmount",value:function(){this.state.preview&&URL.revokeObjectURL(this.state.preview)}},{key:"onDrop",value:function(e){var t=this,n=e[0];n&&("undefined"==typeof FileRef&&(window.FileRef=function(e){return this.file=e,this}),this.setState({file:n,preview:URL.createObjectURL(n)},(function(){t.props.onDrop&&t.props.onDrop(new window.FileRef(n))})))}},{key:"onDragEnter",value:function(e){var t=this.hasImage(e);this.setState({dragging:t})}},{key:"hasImage",value:function(e){for(var t=e.dataTransfer.items,n=0;n<t.length;n++){var r=t[n];if("file"===r.kind&&r.type.startsWith("image/"))return!0}return!1}},{key:"onDragLeave",value:function(e){this.setState({dragging:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement(N,{accept:"image/*",onDrop:this.onDrop.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this)},(function(t){var n=t.getRootProps,r=t.getInputProps;return o.a.createElement("section",{className:"container",style:{minWidth:"100px",minHeight:"100px"}},o.a.createElement("div",n({className:"dropzone"}),o.a.createElement(te,r({preview:e.state.preview,dragging:e.state.dragging,style:e.props.style,dragLabel:e.props.dragLabel,readyLabel:e.props.readyLabel}))))}))}}]),t}(o.a.Component)}])}));